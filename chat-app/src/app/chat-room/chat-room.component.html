<div class="container">
  <div *ngIf="userData.connected; else registerForm" class="chat-box">
    <div class="member-list">
      <ul>
        <li (click)="setActiveTab('CHATROOM')" [class.active]="tab === 'CHATROOM'" class="member">Chatroom</li>
        <li *ngFor="let name of privateChats.keys()" (click)="setActiveTab(name)" [class.active]="tab === name" class="member">{{ name }}</li>
      </ul>
    </div>
    <div class="chat-content">
      <ul class="chat-messages" *ngIf="tab === 'CHATROOM'; else privateChat">
        <li *ngFor="let chat of publicChats" [class.self]="chat.senderName === userData.username" class="message">
          <div *ngIf="chat.senderName !== userData.username" class="avatar">{{ chat.senderName }}</div>
          <div class="message-data">{{ chat.message }}</div>
          <div *ngIf="chat.senderName === userData.username" class="avatar self">{{ chat.senderName }}</div>
        </li>
      </ul>
      <ng-template #privateChat>
        <ul class="chat-messages">
          <li *ngFor="let chat of privateChats.get(tab)" [class.self]="chat.senderName === userData.username" class="message">
            <div *ngIf="chat.senderName !== userData.username" class="avatar">{{ chat.senderName }}</div>
            <div class="message-data">{{ chat.message }}</div>
            <div *ngIf="chat.senderName === userData.username" class="avatar self">{{ chat.senderName }}</div>
          </li>
        </ul>
      </ng-template>
      <div class="send-message">
        <input type="text" class="input-message" placeholder="enter the message" [(ngModel)]="userData.message">
        <button type="button" class="send-button" (click)="tab === 'CHATROOM' ? sendMessage() : sendPrivateMessage()">send</button>
      </div>
    </div>
  </div>
  <ng-template #registerForm>
    <div class="register">
      <input id="user-name" placeholder="Enter your name" name="userName" [(ngModel)]="userData.username">
      <button type="button" (click)="connect()">connect</button>
    </div>
  </ng-template>
</div>
